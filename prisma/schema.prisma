// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model organization {
  id BigInt @id @default(autoincrement())
  name String @db.VarChar(50)
  status Int
  tribes tribe[]
}

model tribe {
  id BigInt @id @default(autoincrement())
  organization organization @relation(fields: [id_organization], references: [id])
  id_organization BigInt
  name String @db.VarChar(50)
  status Int
  repositories repository[]
}

model repository {
  id BigInt @id @default(autoincrement())
  tribe tribe @relation(fields: [id_tribe], references: [id])
  id_tribe BigInt
  name String @db.VarChar(50)
  state String @db.VarChar(1)
  create_time DateTime @default(now())
  status String @db.VarChar(1)
  metrics metrics?
}

model metrics {
  repository repository @relation(fields: [id_repository], references: [id])
  id_repository BigInt @id @default(autoincrement())
  coverage Float @db.DoublePrecision()
  bugs Int
  vulnerabilities Int
  hotspot Int
  code_smells Int
}
